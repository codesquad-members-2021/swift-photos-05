func bar() {
    DispatchQueue.main.async {
        print("A")
        DispatchQueue.main.async {
            print("B")
        }
        print("C")
    }
}

DispatchQueue.main.async {
    print("1")
    bar()
    print("2")
}
print("가")
bar()
print("나")

RunLoop.main.run(until: Date(timeIntervalSinceNow: TimeInterval(5)))





<img width="1680" alt="Screen Shot 2021-03-24 at 13 20 52 PM" src="https://user-images.githubusercontent.com/60323625/112254392-df5e7700-8ca3-11eb-9859-1417acde0dca.png">

DispatchQueue.main.sync 는 main thread에서 deadlock을 주의해야한다!

UIKit의 viewcontroller는 main에서 다뤄야한다고 들어 

처음엔 DispatchQueue.main.sycn{ ... }로 작성했지만 deadlock은 발생하지 않아서 대체 어떤 thread에서 실행되나 봤더니 thread15에서 실행중이다...! 그래서 deadlock이 발생하지 않았지만.. viewController(UIKit)이 실행되는 곳이 main인데 왜 main thread가 아닌지는 미궁속으로...